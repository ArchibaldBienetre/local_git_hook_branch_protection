name: Run tests
run-name: ${{ github.workflow }} - running in ${{ github.repository }}, triggered by ${{ github.event_name }}
on: [ push ]
jobs:
  Run-ShellSpec-Tests:
    runs-on: ubuntu-22.04
    steps:
      - name: "Check out"
        uses: actions/checkout@v4
      - name: "Install ShellSpec and KCov"
        run: |
          cd test
          ./install_shellspec.sh
          ./install_kcov.sh
      - name: "Run ShellSpec tests"
        run: |
          cd test
          ./run_shellspec_tests.sh --kcov
      - uses: actions/upload-artifact@v4
        with:
          name: upload coverage data
          path: test/coverage/